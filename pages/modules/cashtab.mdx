# Module: Cashtab (eCash Wallet)

**The Cashtab module provides native eCash (XEC) and SLP token functionality directly within the Webizen platform. It is a refactored and deeply integrated version of the Cashtab wallet, serving as the economic backbone for various features.**

This module is responsible for all blockchain interactions, including wallet creation, transaction signing, and balance verification.

## Purpose and Functionality

The primary purpose of the `cashtab` module is to provide a secure and seamless way for users and other modules to interact with the eCash network. It abstracts the complexities of blockchain communication into a simple, high-level API.

**Core Functions:**
-   **Wallet Management:** Handles the creation of new wallets, secure storage of private keys (managed by the `crypto` service), and recovery from BIP39 mnemonic phrases.
-   **Transaction Handling:** Constructs, signs (using ECDSA), and broadcasts eCash transactions.
-   **SLP Token Support:** Validates and manages Simple Ledger Protocol (SLP) tokens, which are used for features like access control and community rewards.
-   **Balance & History Queries:** Interacts with a Chronik indexer to fetch wallet balances, transaction histories, and UTXO (Unspent Transaction Output) sets.
-   **Signature Verification:** Provides methods to sign messages with the user's eCash private key and to verify such signatures, a crucial function for service activation and authentication.

## Technical Implementation

-   **Module Path**: `src/modules/cashtab/index.js`
-   **UI Component**: The main user-facing wallet interface is rendered by `src/components/Access.js`, which leverages this module's functions. Other components may also call upon it for specific tasks (e.g., a "pay" button).
-   **Core Libraries**:
    -   `@cashtab/wallet-lib`: The underlying library for core wallet logic.
    -   `chronik-client`: The client for communicating with a Chronik indexer to get blockchain data.
-   **Dependencies**:
    -   `services/crypto`: For all ECDSA signing operations and secure key storage.
    -   `services/config`: To get the URL of the trusted Chronik indexer.
    -   `services/eventBus`: To announce incoming transactions or changes in balance.

### Example Usage by Other Modules

The `cashtab` module is a service provider for many other modules.

-   **`access` module**: Calls `cashtab.getBalance()` and `cashtab.getSlpTokens()` to enforce the platform's access policy.
-   **`gitmark` module**: Calls `cashtab.sendTx()` to associate a git commit with an eCash transaction.
-   **`community` module**: Uses `cashtab.sendTx()` to distribute eCash rewards to contributors.
-   **`adp` module**: Uses `cashtab.signMessage()` to prove ownership of an eCash address for identity verification.

By centralizing all eCash-related functionality into this single, robust module, Webizen ensures that blockchain interactions are handled securely and consistently across the entire platform.
