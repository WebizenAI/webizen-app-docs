# export const type = "page"
# export const title = "Module: Gitmark"
# Module: Gitmark

**The Gitmark module provides a novel way to link software development activities directly to the eCash blockchain. It allows users to "gitmark" a specific git commit by associating it with an on-chain transaction, creating a permanent, transparent, and immutable record of the work.**

This feature is particularly useful for managing bounties, tracking funded development, and creating a high-trust audit trail for software projects.

## Purpose and Functionality

The primary goal of the `gitmark` module is to bridge the gap between the world of version control (like GitHub and GitLab) and the world of blockchain-based value transfer.

**Core Functions:**
-   **Git Platform Integration:** It uses OAuth to securely connect to popular git hosting platforms, including GitHub and GitLab, via their respective APIs.
-   **Commit Selection:** It provides a UI for users to select a specific repository and commit hash that they wish to mark.
-   **eCash Transaction:** It integrates with the `cashtab` module to create and broadcast an eCash transaction. The commit hash and other relevant metadata are embedded in the `OP_RETURN` field of the transaction.
-   **Verifiable Linking:** It stores the resulting transaction ID (txid) along with the commit data as a new RDF resource in the user's Solid Pod, creating a verifiable link between the on-chain and off-chain data.
-   **Diff Viewer:** The UI includes a diff viewer to show the exact code changes associated with the marked commit.

## Technical Implementation

-   **Module Path**: `src/modules/gitmark/index.js`
-   **UI Component**: The main interface for creating and viewing gitmarks is rendered by `src/components/Gitmark.js`.
-   **Core Libraries**:
    -   `@octokit/rest`: For interacting with the GitHub API.
    -   `gitlab`: For interacting with the GitLab API.
    -   `@cashtab/wallet-lib`: Used via the `cashtab` module for creating the eCash transaction.
-   **Ontology**: `ontologies/gitmark-v1.ttl` defines the RDF schema for a "Gitmark," linking a commit to a transaction ID and project metadata.
-   **Dependencies**:
    -   `modules/cashtab`: Absolutely essential for creating the on-chain transaction.
    -   `modules/work`: To associate a gitmark with a specific project or task within the Work Management system.
    -   `modules/settings`: For managing the OAuth tokens for GitHub and GitLab.
    -   `services/webizen-api`: Specifically the `/gitmark/commit` endpoint, which this module powers.

### Example Flow: Marking a Commit for a Bounty

1.  A project maintainer wants to pay a developer a bounty for fixing a bug. The fix is in commit `a1b2c3d4`.
2.  The maintainer opens the Gitmark UI, authenticates with GitHub via OAuth, and selects the relevant repository and commit hash.
3.  They enter the bounty amount (e.g., 500,000 XEC) and the developer's eCash address.
4.  The `Gitmark.js` component dispatches an event: `eventBus.emit('gitmark:create', { repo: '...', commit: 'a1b2c3d4', amount: 500000, recipient: '...' })`.
5.  The `gitmark` module's `handleEvent` function receives the request.
6.  It calls the `cashtab` module, providing the recipient address, amount, and the commit hash to be embedded in the `OP_RETURN` field.
7.  The `cashtab` module creates, signs, and broadcasts the transaction. It returns the `txid` to the `gitmark` module.
8.  The `gitmark` module then creates a new RDF resource using its ontology, linking the commit hash, repository URL, `txid`, and contributor's WebID, and saves it to the project's Solid Pod.
9.  The developer now has a publicly verifiable, on-chain proof of payment for their specific contribution.
