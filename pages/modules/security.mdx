export const type = "page"
export const title = "Module: Security"

# Module: Security

**The Security module is the central cryptographic policy engine for the Webizen platform. It does not perform cryptographic operations itself but dictates which algorithms and parameters should be used for specific tasks.**

This module ensures that all other parts of the application adhere to the platform's security standards in a consistent and verifiable way.

---

## Purpose and Functionality

The primary purpose of the `security` module is to act as a single source of truth for cryptographic policy. When another module needs to sign a piece of data, it doesn't decide which algorithm to use; it asks the `security` module for the correct policy, and then passes that policy to the `crypto` service.

**Core Functions:**

- **Policy Management:** It loads and parses the security policies defined in `config/webizen-config-v0.26.json`.
- **Policy Resolution:** It provides a function that, given a specific data type or context, returns the mandated cryptographic algorithm. For example, given the context `'agreement'`, it will return `'SPHINCS+'`.
- **Centralized Control:** It allows an administrator or user to change the cryptographic policy for the entire application by modifying a single configuration file, without needing to alter the code of individual modules.

---

## Technical Implementation

- **Module Path**: `src/modules/security/index.js`
- **Configuration**: `config/webizen-config-v0.26.json`
- **Dependencies:**
  - `services/config`: To load the security policy configuration.
  - `services/eventBus`: To listen for potential policy update events.

---

### Example Policy Configuration

A snippet from `webizen-config-v0.26.json` might look like this:

```json
{
  "security": {
    "signingPolicy": [
      { "dataType": "agreement", "algorithm": "SPHINCS+" },
      { "dataType": "backup", "algorithm": "SPHINCS+" },
      { "dataType": "verifiableCredential", "algorithm": "SPHINCS+" },
      { "dataType": "transaction", "algorithm": "ECDSA" },
      { "dataType": "chatMessage", "algorithm": "Ed25519" },
      { "dataType": "default", "algorithm": "Ed25519" }
    ]
  }
}
```

---

### Example Usage Flow

This shows how the agreements module would use the security and crypto services together:

1. The agreements module needs to sign a new agreement.
2. It calls:

   ```javascript
   modules.getData('security', { type: 'get_signing_policy', dataType: 'agreement' })
   ```

3. The security module receives this request, looks up `'agreement'` in its loaded policy, and returns the string `'SPHINCS+'`.
4. The agreements module then calls the crypto service:

   ```javascript
   services.crypto.sign(agreementData, { algorithm: 'SPHINCS+' })
   ```

5. The crypto service receives the data and the explicit instruction to use SPHINCS+, and proceeds with the signing operation.

This separation of concerns—where the security module decides the "what" and the crypto service handles the "how"—is a cornerstone of Webizen's robust and maintainable security architecture.