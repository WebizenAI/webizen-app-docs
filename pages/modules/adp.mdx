# Module: Authenticated Data Protocol (ADP)

**The ADP module implements the Authenticated Data Protocol, a system for creating verifiable links between a user's WebID and other identifiers across the web. It is a cornerstone of Webizen's trust and identity verification framework.**

This module allows users to prove ownership of different accounts and identifiers, creating a cohesive and trustworthy digital persona without relying on a central authority.

## Purpose and Functionality

The primary purpose of the `adp` module is to manage the discovery and verification of a user's identity constituents.

**Core Functions:**
-   **Identity Discovery:** It can fetch and validate public identifiers linked to a user's domain. The primary use case is discovering a user's eCash address by querying for a specific `TXT` record in their domain's DNS records (e.g., `adp:hasEcashAccount`).
-   **Link Validation:** After discovering a linked identifier, the module validates the link by cross-referencing it with the user's WebID profile and, if applicable, by requesting a cryptographic signature via the `cashtab` module to prove control.
-   **Call Verification:** For real-time communication, the module integrates with the WebRTC features to provide a mechanism for verifying the identity of participants in a call. This helps prevent impersonation and ensures that you are communicating with the correct person.
-   **Multi-Factor Authentication Integration:** It can act as a component in a multi-factor authentication flow, where proving control over a linked ADP identifier serves as one of the authentication factors.

## Technical Implementation

-   **Module Path**: `src/modules/adp/index.js`
-   **UI Component**: The user-facing elements for ADP are typically integrated into the `Access` and `AddressBook` components, where users can manage their linked identities and view the verification status of their contacts.
-   **Core Libraries**:
    -   DNS-over-HTTPS (DoH) clients for securely querying DNS records.
-   **Dependencies**:
    -   `modules/cashtab`: To request cryptographic signatures needed to prove control over an eCash address.
    -   `modules/security`: To ensure all verification processes adhere to the platform's security policies.
    -   `services/webizen-api`: To interact with the underlying networking and cryptographic services.

### Example Flow: Discovering and Verifying an eCash Address

1.  A user adds a new contact, "Alice," with the WebID `https://alice.example.com/profile#me`.
2.  The `addressbook` module asks the `adp` module to discover linked identifiers for Alice's domain, `alice.example.com`.
3.  The `adp` module performs a DNS-over-HTTPS query for a `TXT` record at `alice.example.com` that matches the `adp:hasEcashAccount` property.
4.  The DNS record returns an eCash address: `ecash:q...`.
5.  The `adp` module then fetches Alice's WebID profile at `https://alice.example.com/profile` and checks if the same eCash address is listed there.
6.  To complete verification, the user's client could issue a challenge to Alice's client, requesting that she sign a message with the private key corresponding to that eCash address.
7.  Alice's `cashtab` module performs the signature, and the result is sent back.
8.  The user's client verifies the signature. If successful, Alice's eCash address is marked as "verified" in the address book, providing a high degree of confidence in her identity.
