# Module: Calendar

**The Calendar module provides a full-featured scheduling and event management system within Webizen. It allows users to create, manage, and share events in a decentralized and interoperable manner.**

This module integrates with other core Webizen services to link events to contacts, projects, and verifiable credentials.

## Purpose and Functionality

The primary purpose of the `calendar` module is to provide a robust personal and collaborative scheduling tool that respects user data ownership.

**Core Functions:**
-   **Event Management:** Standard calendar functionalities including creating, editing, and deleting events with details like title, description, location, start/end times, and reminders.
-   **VC-Based Invitations:** Instead of traditional email invitations, Webizen uses **Verifiable Credentials (VCs)**. When a user is invited to an event, a VC is issued and sent to them, which acts as a cryptographic "ticket" to the event. This is handled by the `@digitalbazaar/vc` library.
-   **Solid Pod Integration:** All calendar events are stored as RDF data in the user's Solid Pod, using standard vocabularies like `schema.org` for interoperability with other calendar applications.
-   **Task Scheduling:** Integrates with the `xaitask` job scheduler to handle reminders and notifications for upcoming events.
-   **UI and Interaction:** Provides a rich, interactive calendar view using the FullCalendar library, with support for drag-and-drop event creation and modification.

## Technical Implementation

-   **Module Path**: `src/modules/calendar/index.js`
-   **UI Component**: The main calendar interface is rendered by `src/components/Calendar.js`.
-   **Core Libraries**:
    -   `FullCalendar`: For the interactive calendar UI.
    -   `@digitalbazaar/vc`: For creating and verifying event invitations as Verifiable Credentials.
    -   `node-schedule` (via `xaitask`): For scheduling reminders.
-   **Ontology**: `ontologies/calendar-v1.ttl` defines the RDF schema for calendar events, extending `schema.org` vocabulary.
-   **Dependencies**:
    -   `modules/addressbook`: To invite contacts from the user's address book to events.
    -   `modules/work`: To link calendar events directly to project tasks and deadlines.
    -   `services/solidos`: To save and retrieve event data from the user's Solid Pod.
    -   `services/eventBus`: To announce new or updated events to the rest of the application.

### Example Flow: Creating and Sharing an Event

1.  A user creates a new event in the `Calendar.js` component and invites a contact.
2.  The UI component dispatches an event: `eventBus.emit('calendar:create_event', { eventData: {...}, invitees: [...] })`.
3.  The `calendar` module's `handleEvent` function receives the request.
4.  It converts the `eventData` into RDF using the `calendar-v1.ttl` ontology.
5.  It saves the new RDF data to the user's Solid Pod via the `solidos.js` service.
6.  For each invitee, it generates a Verifiable Credential that represents the invitation, signing it with the user's key via the `crypto` service.
7.  It sends the VC to each invitee through a P2P communication channel.
8.  It schedules a job with `xaitask` to fire a notification event 15 minutes before the event's start time.

This workflow illustrates how the calendar module combines UI interaction, data persistence, verifiable credentials, and task scheduling to create a powerful and decentralized scheduling system.
