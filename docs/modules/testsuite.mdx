# Module: Test Suite

**The Test Suite module provides a user-facing interface for running unit, integration, and end-to-end tests directly within the Webizen Desktop Application. It gives developers and power users a simple way to verify the health and functionality of the entire platform.**

This module is crucial for maintaining a high level of quality and reliability, making it easy to diagnose issues after code changes or updates.

## Purpose and Functionality

The primary goal of the `testsuite` module is to make testing accessible and transparent. Instead of requiring developers to run complex command-line scripts, it provides a simple "one-click" interface to validate the system's integrity.

**Core Functions:**
-   **UI-Based Test Runner:** It provides a user interface where different test suites (e.g., `Unit`, `Integration`, `E2E`) can be selected and executed.
-   **Functionality Status Reporting:** The UI displays the results of the tests in a clear and immediate way. Each major feature or component is listed with a corresponding status indicator:
    -   **Green Tick (`✓`):** Indicates that all tests for this feature passed.
    -   **Red Cross (`✗`):** Indicates that one or more tests failed.
-   **Multilingual Error Reporting:** When a test fails, the error messages and descriptions are translated into the user's selected language via the `i18n` module. This makes it easier for a global community of developers to understand and diagnose problems.
-   **Integration with Test Files:** The module is designed to discover and run the actual test files located in the `tests/` directory of the repository (e.g., `tests/unit/security.test.js`, `tests/integration/work.test.js`).

## Technical Implementation

-   **Module Path**: `src/modules/testsuite/index.js`
-   **UI Component**: The main test suite interface is rendered by `src/components/TestSuite.js`.
-   **Core Libraries**:
    -   A test runner library like **Jest** or **Mocha** is used under the hood to execute the test files. The `testsuite` module acts as a graphical front-end for this runner.
-   **Dependencies**:
    -   `modules/i18n`: Essential for providing multilingual error messages and UI text.
    -   `services/logging`: To capture detailed logs during test runs for later analysis.

### Example Flow: Running the Security Tests

1.  A developer navigates to the Test Suite panel in the Webizen application.
2.  They see a list of test suites and click the "Run" button next to "Security Integration Tests."
3.  The `TestSuite.js` component dispatches an event: `eventBus.emit('testsuite:run', { suite: 'integration/security' })`.
4.  The `testsuite` module's `handleEvent` function receives the request.
5.  It invokes the test runner (e.g., Jest) programmatically, configured to only run the tests in `tests/integration/security.test.js`.
6.  As the tests run, the test runner emits events for each pass or fail. The `testsuite` module captures these events.
7.  For a failed test, the module might receive an error like: `Error: SPHINCS+ signature verification failed for CID xyz.`
8.  The `testsuite` module looks up the key for this error message in the `i18n` language files and finds the translation for the user's current language.
9.  It then dispatches a result event back to the UI: `eventBus.emit('testsuite:result', { test: 'SPHINCS+ Verification', status: 'failed', details: 'La vérification de la signature SPHINCS+ a échoué pour le CID xyz.' })`.
10. The `TestSuite.js` component receives this event and updates the UI to show a red cross next to "SPHINCS+ Verification" and displays the translated error message.
